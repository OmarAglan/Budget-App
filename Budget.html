<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard - Budget Tracker</title>

  <!-- Dependencies -->
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Design System -->
  <link href="css/main.css" rel="stylesheet" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4f46e5">
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top mb-4">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
        <i class="bi bi-wallet2"></i> <span>Budget Tracker</span>
      </a>
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto gap-lg-3">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active fw-bold" href="Budget.html">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="About.html">About</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container">
    <!-- Section 1: KPI Cards (Summary) -->
    <div class="row g-4 mb-4">
      <!-- Budget Card -->
      <div class="col-md-4">
        <div class="card h-100 border-0">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between mb-3">
              <h6 class="text-uppercase text-muted fw-bold small mb-0">Total Budget</h6>
              <div class="icon-box bg-primary bg-opacity-10 text-primary rounded p-2">
                <i class="bi bi-cash-stack"></i>
              </div>
            </div>
            <h2 class="stat-number mb-0" id="budget-amount">$0.00</h2>
            <small class="text-muted">Monthly Limit</small>
          </div>
        </div>
      </div>

      <!-- Expenses Card -->
      <div class="col-md-4">
        <div class="card h-100 border-0">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between mb-3">
              <h6 class="text-uppercase text-muted fw-bold small mb-0">Total Spent</h6>
              <div class="icon-box bg-danger bg-opacity-10 text-danger rounded p-2">
                <i class="bi bi-credit-card"></i>
              </div>
            </div>
            <h2 class="stat-number text-danger mb-0" id="expense-amount">$0.00</h2>
            <div class="d-flex align-items-center gap-2 mt-1">
              <small class="text-muted" id="expense-percentage">0% Used</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Balance Card -->
      <div class="col-md-4">
        <div class="card h-100 border-0">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between mb-3">
              <h6 class="text-uppercase text-muted fw-bold small mb-0">Balance</h6>
              <div class="icon-box bg-success bg-opacity-10 text-success rounded p-2">
                <i class="bi bi-wallet"></i>
              </div>
            </div>
            <h2 class="stat-number text-success mb-2" id="balance-amount">$0.00</h2>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar bg-success" id="budget-progress" role="progressbar" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="row g-4">

      <!-- Left Column: Input Forms -->
      <div class="col-lg-4">
        <div class="d-flex flex-column gap-4 sticky-lg-top" style="top: 90px; z-index: 1;">

          <!-- 1. Budget Form -->
          <div class="card border-0">
            <div class="card-header bg-transparent border-0 pb-0">
              <h5 class="fw-bold mb-0"><i class="bi bi-sliders me-2 text-primary"></i>Set Budget</h5>
            </div>
            <div class="card-body">
              <form id="budget-form">
                <div class="form-floating mb-3">
                  <input type="number" class="form-control" id="budget-input" placeholder="Enter amount" min="0"
                    step="0.01">
                  <label for="budget-input">Monthly Amount</label>
                </div>
                <div class="row g-2 mb-3">
                  <div class="col-6">
                    <button type="button" class="btn btn-outline-secondary w-100 btn-sm"
                      id="preset-1000">$1,000</button>
                  </div>
                  <div class="col-6">
                    <button type="button" class="btn btn-outline-secondary w-100 btn-sm"
                      id="preset-2500">$2,500</button>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary w-100" id="budget-submit">
                  Set Budget
                </button>
              </form>
              <div class="budget-feedback mt-3"></div>
            </div>
          </div>

          <!-- 2. Expense Form -->
          <div class="card border-0">
            <div class="card-header bg-transparent border-0 pb-0">
              <h5 class="fw-bold mb-0"><i class="bi bi-plus-circle me-2 text-danger"></i>Add Expense</h5>
            </div>
            <div class="card-body">
              <form id="expense-form">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="expense-input" placeholder="Title" required>
                  <label for="expense-input">Expense Name</label>
                </div>

                <div class="form-floating mb-3">
                  <select class="form-select" id="expense-category" required>
                    <option value="" disabled selected>Select Category</option>
                    <option value="groceries">üõí Groceries</option>
                    <option value="transportation">üöó Transportation</option>
                    <option value="utilities">‚ö° Utilities</option>
                    <option value="entertainment">üé¨ Entertainment</option>
                    <option value="dining">üçΩÔ∏è Dining Out</option>
                    <option value="shopping">üõçÔ∏è Shopping</option>
                    <option value="healthcare">üè• Healthcare</option>
                    <option value="education">üìö Education</option>
                    <option value="travel">‚úàÔ∏è Travel</option>
                    <option value="fitness">üí™ Fitness</option>
                    <option value="other">üì¶ Other</option>
                  </select>
                  <label for="expense-category">Category</label>
                </div>

                <div class="row g-2 mb-3">
                  <div class="col-6">
                    <div class="form-floating">
                      <input type="number" class="form-control" id="amount-input" placeholder="0.00" min="0" step="0.01"
                        required>
                      <label for="amount-input">Amount</label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-floating">
                      <input type="date" class="form-control" id="expense-date" required>
                      <label for="expense-date">Date</label>
                    </div>
                  </div>
                </div>

                <!-- Quick Amounts -->
                <div class="mb-3">
                  <label class="small text-muted mb-2">Quick Add:</label>
                  <div class="d-flex flex-wrap gap-2">
                    <button type="button" class="btn btn-sm btn-light border quick-amount" data-amount="10">$10</button>
                    <button type="button" class="btn btn-sm btn-light border quick-amount" data-amount="20">$20</button>
                    <button type="button" class="btn btn-sm btn-light border quick-amount" data-amount="50">$50</button>
                  </div>
                </div>

                <button type="submit" class="btn btn-danger w-100" id="expense-submit">
                  Add Transaction
                </button>
              </form>
              <div class="expense-feedback mt-3"></div>
            </div>
          </div>

          <!-- Data Tools -->
          <div class="card border-0">
            <div class="card-body p-3 d-flex justify-content-between gap-2">
              <button class="btn btn-sm btn-outline-dark flex-fill" id="export-data" title="Save Backup"><i
                  class="bi bi-download"></i> Backup</button>
              <button class="btn btn-sm btn-outline-dark flex-fill" id="import-data" title="Load Backup"><i
                  class="bi bi-upload"></i> Restore</button>
              <input type="file" id="import-file" class="d-none" accept=".json">
            </div>
          </div>

        </div>
      </div>

      <!-- Right Column: Visualization & List -->
      <div class="col-lg-8">

        <!-- Analytics Section -->
        <div class="card border-0 mb-4">
          <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
            <h5 class="fw-bold mb-0">Analytics & Trends</h5>
            <!-- Hidden elements for advanced-features.js compatibility -->
            <div class="d-none">
              <span id="health-score">0</span>
              <div id="health-score-circle"></div>
              <span id="budget-adherence"></span>
              <span id="spending-trend"></span>
              <div id="smart-insights"></div>
              <div id="recent-activity"></div>
              <tbody id="category-breakdown-table"></tbody>
            </div>
          </div>
          <div class="card-body">
            <ul class="nav nav-tabs nav-fill mb-4" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-charts"
                  type="button">Charts</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-stats"
                  type="button">Insights</button>
              </li>
            </ul>

            <div class="tab-content">
              <div class="tab-pane fade show active" id="tab-charts">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <h6 class="text-center text-muted small fw-bold mb-3">Distribution</h6>
                    <div style="height: 250px; position: relative;">
                      <canvas id="expense-chart"></canvas>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <h6 class="text-center text-muted small fw-bold mb-3">Daily Trend (Last 30 Days)</h6>
                    <div style="height: 250px; position: relative;">
                      <canvas id="expense-trend-chart"></canvas>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Period Stats (Hidden logic elements populated by app.js) -->
              <div class="tab-pane fade" id="tab-stats">
                <div class="row g-3 text-center">
                  <div class="col-3">
                    <div class="p-3 bg-light rounded">
                      <small class="text-muted d-block">Today</small>
                      <span class="fw-bold text-dark" id="today-expenses">$0.00</span>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="p-3 bg-light rounded">
                      <small class="text-muted d-block">This Week</small>
                      <span class="fw-bold text-dark" id="week-expenses">$0.00</span>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="p-3 bg-light rounded">
                      <small class="text-muted d-block">This Month</small>
                      <span class="fw-bold text-dark" id="month-expenses">$0.00</span>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="p-3 bg-light rounded">
                      <small class="text-muted d-block">Avg/Day</small>
                      <span class="fw-bold text-dark" id="avg-daily">$0.00</span>
                    </div>
                  </div>
                </div>
                <div class="alert alert-info mt-3 mb-0">
                  <i class="bi bi-lightbulb me-2"></i> <span id="financial-tip">Track your expenses daily to improve
                    accuracy.</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Transactions List -->
        <div class="card border-0">
          <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
            <h5 class="fw-bold mb-0">Recent Transactions</h5>
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-outline-secondary" id="reset-filters" title="Reset Filters"><i
                  class="bi bi-arrow-clockwise"></i></button>
              <button class="btn btn-sm btn-outline-danger" id="clear-data" title="Clear All"><i
                  class="bi bi-trash"></i></button>
            </div>
          </div>

          <div class="card-body bg-light bg-opacity-50 border-bottom">
            <!-- Search & Filter Toolbar -->
            <div class="row g-2">
              <div class="col-md-5">
                <div class="input-group">
                  <span class="input-group-text bg-white border-end-0"><i class="bi bi-search"></i></span>
                  <input type="text" class="form-control border-start-0 ps-0" id="expense-search"
                    placeholder="Search expenses...">
                </div>
              </div>
              <div class="col-md-3">
                <select class="form-select" id="filter-category">
                  <option value="all">All Categories</option>
                  <option value="groceries">Groceries</option>
                  <option value="transportation">Transport</option>
                  <option value="utilities">Utilities</option>
                  <option value="entertainment">Entertainment</option>
                  <option value="dining">Dining</option>
                  <option value="shopping">Shopping</option>
                  <option value="healthcare">Healthcare</option>
                </select>
              </div>
              <div class="col-md-3">
                <select class="form-select" id="filter-period">
                  <option value="all">All Time</option>
                  <option value="today">Today</option>
                  <option value="thisWeek">This Week</option>
                  <option value="thisMonth">This Month</option>
                </select>
              </div>
              <div class="col-md-1">
                <div class="dropdown">
                  <button class="btn btn-light border w-100" data-bs-toggle="dropdown"><i
                      class="bi bi-sort-down"></i></button>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#" data-sort="date-desc">Newest First</a></li>
                    <li><a class="dropdown-item" href="#" data-sort="amount-desc">Amount (High-Low)</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="card-body p-0">
            <!-- Header Row -->
            <div class="d-flex justify-content-between px-4 py-2 bg-light border-bottom text-muted small fw-bold">
              <span style="flex: 2">Expense Details</span>
              <span class="text-end" style="flex: 1">Amount</span>
            </div>

            <!-- Dynamic List Container -->
            <div id="expense-list" class="p-3" style="min-height: 200px;">
              <!-- Content injected by JS -->
              <div id="no-expenses-message" class="text-center py-5 d-none">
                <i class="bi bi-receipt text-muted display-4 mb-3 d-block"></i>
                <p class="text-muted">No transactions found.</p>
              </div>
            </div>

            <!-- Hidden Count for JS -->
            <span id="expense-count" class="d-none">0</span>
          </div>

          <div class="card-footer bg-transparent border-0 text-center">
            <button class="btn btn-link text-decoration-none text-muted btn-sm" id="monthly-report">Generate
              Report</button>
            <button class="d-none" id="bulk-delete">Bulk Delete</button>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer class="mt-5 text-center text-muted small py-4">
    <p>&copy; 2024 Budget Tracker. Secure ‚Ä¢ Local ‚Ä¢ Private</p>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/jquery-3.7.1.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/app.js"></script>
  <!-- Hidden features retained to prevent console errors -->
  <script src="js/advanced-features.js"></script>
  <script src="js/performance.js"></script>
</body>

</html>